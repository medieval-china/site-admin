{"version":3,"sources":["components/Login/index.js","helper/TouchEmulator.js","components/Chart/Chart.js","components/Chart/LineChart.js","helper/utils.js","helper/index.js","components/Dashboard/index.js","App.js","reportWebVitals.js","index.js"],"names":["Copyright","Typography","variant","color","align","Link","href","Date","getFullYear","Alert","props","elevation","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SignIn","classes","useState","open","severity","message","snackbar","setSnackbar","userName","setUserName","password","setPassword","handleClose","Container","component","maxWidth","CssBaseline","className","Avatar","noValidate","onSubmit","e","values","preventDefault","nowPw","dayjs","format","onLogin","TextField","required","fullWidth","id","label","name","autoComplete","placeholder","onChange","target","value","autoFocus","type","Button","Box","mt","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","onClose","eventTarget","Touch","identifier","pos","deltaX","deltaY","this","clientX","clientY","screenX","screenY","pageX","pageY","TouchList","touchList","item","index","identifiedTouch","onMouse","touchType","ev","which","dispatchEvent","eventName","mouseEv","touchEvent","document","createEvent","initEvent","altKey","ctrlKey","metaKey","shiftKey","touches","getActiveTouches","targetTouches","changedTouches","createTouchList","triggerTouch","push","TouchEmulator","objs","window","documentElement","o","length","p","undefined","fakeTouchSupport","addEventListener","multiTouchOffset","Chart","Math","random","toString","substring","state","isRender","chart","init","options","height","creator","data","F2","pixelRatio","devicePixelRatio","appendPadding","alias","getParentRect","parentEl","canvas","parentElement","getBoundingClientRect","setState","destroy","nextProps","shouldUpdate","isEqual","console","log","ref","node","Component","defaultStyle","LineChart","source","position","split","xKey","yKey","clear","mask","tickCount","range","min","y","tooltip","showCrosshairs","line","shape","point","style","stroke","lineWidth","render","PureComponent","latestNDays","n","days","i","date","subtract","start","startOf","end","endOf","AV","config","generateQuerys","startDate","require","endDate","querys","exitQuery","Query","notEqualTo","startDateQuery","greaterThanOrEqualTo","endDateQuery","lessThan","countPV","conditions","query","and","Promise","resolve","reject","count","then","res","err","countComments","appId","appKey","serverURLs","refreshBtn","right","top","Dashboard","allPVCount","setAllPVCount","allCommentCount","setAllCommentCount","todayPVCount","setTodayPVCount","todayCommentCount","settodayCommentCount","pvsCounts","setPVsCount","commentsCount","setCommentsCount","refreshKey","setRefreshKey","useEffect","todyRange","setTimeout","results","forEach","day","idx","result","pv","catch","error","all","pvList","countlatestDaysPV","filter","v","commentCounts","countLatestDaysComments","IconButton","aria-label","onClick","App","isLogin","setIsLogin","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.88240393.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport dayjs from 'dayjs';\n\nfunction Copyright() {\n  return (\n    <Typography variant='body2' color='textSecondary' align='center'>\n      {'Copyright © '}\n      <Link color='inherit' href='http://medieval-china.github.io/'>\n        Medieval-China\n      </Link>{' '}\n      {new Date().getFullYear()}\n      {'.'}\n    </Typography>\n  );\n}\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant='filled' {...props} />;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function SignIn(props) {\n  const classes = useStyles();\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    severity: 'warning',\n    message: '',\n  });\n  const [userName, setUserName] = useState();\n  const [password, setPassword] = useState();\n\n  const handleSubmit = (e, values) => {\n    e.preventDefault();\n    if (!userName) {\n      setSnackbar({ open: true, severity: 'warning', message: '请输入用户名' });\n      return;\n    }\n    if (!password) {\n      setSnackbar({ open: true, severity: 'warning', message: '请输入密码' });\n      return;\n    }\n\n    const nowPw = dayjs().format('YYYYMMDD');\n    if (userName === 'admin' && password === nowPw) {\n      setSnackbar({ open: true, severity: 'success', message: '登录成功～' });\n      props.onLogin && props.onLogin();\n    } else {\n      setSnackbar({ open: true, severity: 'warning', message: '账号名或密码错误' });\n    }\n  };\n\n  const handleClose = () => {\n    setSnackbar({ open: false, severity: snackbar.severity, message: '' });\n  };\n\n  return (\n    <Container component='main' maxWidth='xs'>\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component='h1' variant='h5'>\n          Sign in\n        </Typography>\n        <form className={classes.form} noValidate onSubmit={handleSubmit}>\n          <TextField\n            variant='outlined'\n            margin='normal'\n            required\n            fullWidth\n            id='username'\n            label='User Name'\n            name='username'\n            autoComplete='username'\n            placeholder='admin'\n            onChange={(e) => setUserName(e.target.value)}\n            autoFocus\n          />\n          <TextField\n            variant='outlined'\n            margin='normal'\n            required\n            fullWidth\n            name='password'\n            label='Password'\n            type='password'\n            id='password'\n            autoComplete='current-password'\n            onChange={(e) => setPassword(e.target.value)}\n          />\n          {/* <FormControlLabel\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\n            label=\"Remember me\"\n          /> */}\n          <Button type='submit' fullWidth variant='contained' color='primary' className={classes.submit}>\n            Sign In\n          </Button>\n        </form>\n      </div>\n      <Box mt={8}>\n        <Copyright />\n      </Box>\n\n      <Snackbar\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n        autoHideDuration={1500}\n        open={snackbar.open}\n        onClose={handleClose}\n        message={snackbar.message}\n      >\n        <Alert onClose={handleClose} severity={snackbar.severity}>\n          {snackbar.message}!\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n}\n","/**\n * Emulate touch on desktop\n */\nlet eventTarget\n\n/**\n * create an touch point\n * @constructor\n * @param target\n * @param identifier\n * @param pos\n * @param deltaX\n * @param deltaY\n * @returns {Object} touchPoint\n */\n\nconst Touch = function Touch(target, identifier, pos, deltaX, deltaY) {\n  deltaX = deltaX || 0\n  deltaY = deltaY || 0\n\n  this.identifier = identifier\n  this.target = target\n  this.clientX = pos.clientX + deltaX\n  this.clientY = pos.clientY + deltaY\n  this.screenX = pos.screenX + deltaX\n  this.screenY = pos.screenY + deltaY\n  this.pageX = pos.pageX + deltaX\n  this.pageY = pos.pageY + deltaY\n}\n\n/**\n * create empty touchlist with the methods\n * @class\n * @return { Array } touchList\n */\nfunction TouchList() {\n  const touchList = []\n\n  touchList.item = function item(index) {\n    return this[index] || null\n  }\n\n  // specified by Mozilla\n  touchList.identifiedTouch = function identifiedTouch(id) {\n    return this[id + 1] || null\n  }\n\n  return touchList\n}\n\n/**\n * Simple trick to fake touch event support\n * this is enough for most libraries like Modernizr and Hammer\n */\nfunction fakeTouchSupport() {\n  const objs = [window, document.documentElement]\n  const props = ['ontouchstart', 'ontouchmove', 'ontouchcancel', 'ontouchend']\n\n  for (let o = 0; o < objs.length; o++) {\n    for (let p = 0; p < props.length; p++) {\n      if (objs[o] && objs[o][props[p]] === undefined) {\n        objs[o][props[p]] = null\n      }\n    }\n  }\n}\n\n/**\n * only trigger touches when the left mousebutton has been pressed\n * @param { String } touchType touchType\n * @return { Function } handler\n */\nfunction onMouse(touchType) {\n  return (ev) => {\n    // prevent mouse events\n\n    if (ev.which !== 1) {\n      return\n    }\n\n    // The EventTarget on which the touch point started when it was first placed on the surface,\n    // even if the touch point has since moved outside the interactive area of that element.\n    // also, when the target doesnt exist anymore, we update it\n    if (ev.type === 'mousedown' || !eventTarget || (eventTarget && !eventTarget.dispatchEvent)) {\n      eventTarget = ev.target\n    }\n\n    triggerTouch(touchType, ev)\n\n    // reset\n    if (ev.type === 'mouseup') {\n      eventTarget = null\n    }\n  }\n}\n\n/**\n * trigger a touch event\n * @param { String } eventName eventName\n * @param { Object } mouseEv mouseEv\n */\nfunction triggerTouch(eventName, mouseEv) {\n  const touchEvent = document.createEvent('Event')\n  touchEvent.initEvent(eventName, true, true)\n\n  touchEvent.altKey = mouseEv.altKey\n  touchEvent.ctrlKey = mouseEv.ctrlKey\n  touchEvent.metaKey = mouseEv.metaKey\n  touchEvent.shiftKey = mouseEv.shiftKey\n\n  touchEvent.touches = getActiveTouches(mouseEv)\n  touchEvent.targetTouches = getActiveTouches(mouseEv)\n  touchEvent.changedTouches = createTouchList(mouseEv)\n\n  eventTarget.dispatchEvent(touchEvent)\n}\n\n/**\n * create a touchList based on the mouse event\n * @param { Object } mouseEv mouseEv\n * @return { TouchList } touchList\n */\nfunction createTouchList(mouseEv) {\n  const touchList = TouchList()\n  touchList.push(new Touch(eventTarget, 1, mouseEv, 0, 0))\n  return touchList\n}\n\n/**\n * receive all active touches\n * @param { Object } mouseEv mouseEv\n * @return { TouchList } touchList\n */\nfunction getActiveTouches(mouseEv) {\n  // empty list\n  if (mouseEv.type === 'mouseup') {\n    return TouchList()\n  }\n  return createTouchList(mouseEv)\n}\n\n/**\n * desktop initializer\n * @param { HTMLElement } target target\n */\nfunction TouchEmulator(target) {\n  fakeTouchSupport()\n\n  target.addEventListener('mousedown', onMouse('touchstart'), true)\n  target.addEventListener('mousemove', onMouse('touchmove'), true)\n  target.addEventListener('mouseup', onMouse('touchend'), true)\n}\n\n// start distance when entering the multitouch mode\nTouchEmulator.multiTouchOffset = 75\n\nexport default TouchEmulator\n","import React, { Component } from 'react';\nimport F2 from '@antv/f2';\nimport isEqual from 'lodash/isEqual';\nimport TouchEmulator from '../../helper/TouchEmulator';\n\nexport default class Chart extends Component {\n  id = `c${Math.random().toString(36).substring(7)}`;\n\n  state = {\n    isRender: false,\n  };\n\n  chart = null;\n\n  init = (options) => {\n    const { width = options.width, height = options.height, creator, data } = this.props;\n    const chart = new F2.Chart({\n      id: this.id,\n      width,\n      height,\n      pixelRatio: window.devicePixelRatio,\n      // padding: [30, 0, 0, 0],\n      appendPadding: [10, 20, 6, 0],\n    });\n\n    creator({ chart, data, alias: data.alias });\n    this.chart = chart;\n  };\n\n  componentDidMount() {\n    const { width, height } = this.getParentRect();\n    this.init({\n      width,\n      height,\n    });\n  }\n\n  componentDidUpdate() {\n    const { isRender } = this.state;\n\n    if (isRender) {\n      const { width, height } = this.getParentRect();\n\n      this.init({\n        width,\n        height,\n      });\n    }\n  }\n\n  getParentRect = () => {\n    const parentEl = this.canvas.parentElement;\n\n    if (parentEl) {\n      const { width, height } = parentEl.getBoundingClientRect();\n\n      TouchEmulator(this.canvas);\n      this.setState({\n        isRender: true,\n      });\n      return { width, height };\n    }\n    this.setState({\n      isRender: false,\n    });\n    return {};\n  };\n\n  componentWillUnmount() {\n    this.chart.destroy();\n    this.chart = null;\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const shouldUpdate = !isEqual(this.props.data, nextProps.data);\n    console.log('shouldComponentUpdate:', shouldUpdate);\n\n    return shouldUpdate;\n  }\n\n  render() {\n    return (\n      <canvas\n        id={this.id}\n        ref={(node) => {\n          this.canvas = node;\n        }}\n      />\n    );\n  }\n}\n","import React, { PureComponent } from 'react';\nimport Chart from './Chart';\n\nconst defaultStyle = {\n  width: '100%',\n  height: '100%',\n};\nexport default class LineChart extends PureComponent {\n  creator = ({ chart, data, alias }) => {\n    const { source, position } = data;\n    const [xKey, yKey] = position.split('*');\n\n    chart.clear();\n    chart.source(source, {\n      [xKey]: {\n        type: 'timeCat',\n        mask: 'MM/DD',\n        tickCount: 7,\n        range: [0, 1],\n      },\n      [yKey]: {\n        tickCount: 6,\n        min: 0,\n        alias: alias.y,\n      },\n    });\n\n    chart.tooltip({\n      showCrosshairs: true,\n    });\n\n    chart.line().position(position).shape('smooth').color('#3da742');\n    chart.point().position(position).shape('smooth').color('#3da742').style({\n      stroke: '#fff',\n      lineWidth: 1,\n    });\n\n    chart.render();\n  };\n\n  render() {\n    const { source = [], position, width, height, alias = {} } = this.props;\n    const style = {\n      width: width || defaultStyle.width,\n      height: height || defaultStyle.height,\n    };\n\n    return (\n      <div className='jsChartWrap' style={style}>\n        <Chart data={{ source, position, alias }} creator={this.creator} />\n      </div>\n    );\n  }\n}\n","import dayjs from 'dayjs';\n\n/**\n * 获取最近N天的数据（涵盖今天）。默认为7天\n * @returns\n */\nexport function latestNDays(n = 7) {\n  const days = [];\n\n  for (let i = n; i > 0; i--) {\n    const date = dayjs().subtract(i, 'day');\n    days.push({\n      start: date.startOf('date'),\n      end: date.endOf('date'),\n    });\n  }\n\n  return days;\n}\n","import { latestNDays } from './utils';\n\nconst AV = window.AV;\nconst config = {\n  appId: 'RE2X3iYzmzwAjkv8WXLYyf1e-MdYXbMMI',\n  appKey: 'yv3AoBegr8qvDisOGH4JqS8y',\n  serverURLs: 'https://us.leancloud.cn/',\n};\n\nAV.init({\n  appId: config.appId,\n  appKey: config.appKey,\n  serverURLs: config.serverURLs,\n});\n\n// 根据规则生成查询条件\nexport function generateQuerys(className, config = {}) {\n  const { require = true, startDate, endDate } = config;\n  const querys = [];\n\n  const exitQuery = new AV.Query(className).notEqualTo('objectId', '');\n\n  querys.push(exitQuery);\n\n  if (startDate) {\n    const startDateQuery = new AV.Query(className);\n\n    startDateQuery.greaterThanOrEqualTo('createdAt', new Date(startDate));\n    querys.push(startDateQuery);\n  }\n\n  if (endDate) {\n    const endDateQuery = new AV.Query(className);\n\n    endDateQuery.lessThan('createdAt', new Date(endDate));\n    querys.push(endDateQuery);\n  }\n\n  return querys;\n}\n\n// 统计PV\nexport function countPV(config = {}) {\n  const { startDate, endDate } = config;\n  const conditions = generateQuerys('Counter', { startDate, endDate });\n  const query = AV.Query.and(...conditions);\n\n  return new Promise((resolve, reject) => {\n    query.count().then(\n      (res) => resolve(res),\n      (err) => reject(err),\n    );\n  });\n}\n\n// 统计评论数\nexport function countComments(config = {}) {\n  const { startDate, endDate } = config;\n  const conditions = generateQuerys('Comment', { startDate, endDate });\n  const query = AV.Query.and(...conditions);\n\n  return new Promise((resolve, reject) => {\n    query.count().then(\n      (res) => resolve(res),\n      (err) => reject(err),\n    );\n  });\n}\n\n// 查询评论\nexport function queryComments(config = {}) {\n  const { startDate, endDate } = config;\n  const conditions = generateQuerys('Comment', { startDate, endDate });\n  const query = AV.Query.and(...conditions);\n\n  return new Promise((resolve, reject) => {\n    query.find().then(\n      (res) => resolve(res),\n      (err) => reject(err),\n    );\n  });\n}\n\n// 统计近n天pv\nexport function countlatestDaysPV(n = 7) {\n  const days = latestNDays(n);\n  const results = [];\n\n  days.forEach((day, idx) => {\n    const { start, end } = day;\n    const startDate = start.format();\n    const endDate = end.format();\n\n    const result = countPV({\n      startDate,\n      endDate,\n    });\n\n    results.push(\n      result\n        .then((pv) => {\n          return {\n            startDate,\n            endDate,\n            date: start.format('YYYY-MM-DD'),\n            pv: pv,\n          };\n        })\n        .catch((err) => {\n          console.error('统计pv错误：', err);\n        }),\n    );\n  });\n\n  return Promise.all(results).then((pvList, idx) => {\n    return pvList;\n  });\n}\n\n// 统计近n天评论\nexport function countLatestDaysComments(n = 7) {\n  const days = latestNDays();\n  const results = [];\n\n  days.forEach((day) => {\n    const { start, end } = day;\n    const startDate = start.format();\n    const endDate = end.format();\n\n    const result = countComments({\n      startDate,\n      endDate,\n    });\n\n    results.push(\n      result\n        .then((count) => ({\n          startDate,\n          endDate,\n          date: start.format('YYYY-MM-DD'),\n          count,\n        }))\n        .catch((err) => {\n          console.error('统计评论错误：', err);\n        }),\n    );\n  });\n\n  return Promise.all(results).then((commentCounts, idx) => {\n    return commentCounts;\n  });\n}\n","import React, { useEffect, useState } from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport { makeStyles } from '@material-ui/core/styles';\nimport dayjs from 'dayjs';\nimport LineChart from '../../components/Chart/LineChart';\n\nimport { countlatestDaysPV, countLatestDaysComments, countPV, countComments } from '../../helper';\n\nimport './index.scss';\n\nconst useStyles = makeStyles((theme) => ({\n  refreshBtn: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n  },\n}));\n\nexport default function Dashboard() {\n  const [allPVCount, setAllPVCount] = useState(0);\n  const [allCommentCount, setAllCommentCount] = useState(0);\n  const [todayPVCount, setTodayPVCount] = useState(0);\n  const [todayCommentCount, settodayCommentCount] = useState(0);\n  const [pvsCounts, setPVsCount] = useState([]);\n  const [commentsCount, setCommentsCount] = useState([]);\n  const [refreshKey, setRefreshKey] = useState(null);\n  const classes = useStyles();\n\n  useEffect(() => {\n    const todyRange = [dayjs().startOf('date').format(), dayjs().endOf('date').format()];\n    // 总\n    countPV().then((res) => {\n      console.log('总PV:', res);\n      setAllPVCount(res);\n    });\n    countComments().then((res) => {\n      console.log('总评论:', res);\n      setAllCommentCount(res);\n    });\n\n    // 当日\n    countPV({\n      startDate: todyRange[0],\n      endDate: todyRange[1],\n    }).then((res) => {\n      console.log('今日PV:', res);\n      setTodayPVCount(res);\n    });\n    countComments({\n      startDate: todyRange[0],\n      endDate: todyRange[1],\n    }).then((res) => {\n      console.log('今日评论:', res);\n      settodayCommentCount(res);\n    });\n\n    // 7日\n    setTimeout(() => {\n      countlatestDaysPV().then((res) => {\n        console.log('7日PV:', res);\n        setPVsCount(res.filter((v) => v));\n      });\n    }, 200);\n    setTimeout(() => {\n      countLatestDaysComments().then((res) => {\n        console.log('7日评论:', res);\n        setCommentsCount(res.filter((v) => v));\n      });\n    }, 600);\n  }, [refreshKey]);\n\n  const refresh = () => {\n    setRefreshKey(Math.random());\n  };\n\n  return (\n    <div className='dashboard-wrapper'>\n      <div className='title'>\n        <h2>后台数据 - 中国的中古</h2>\n      </div>\n      <div className='overview block-item'>\n        <h3>总览</h3>\n        <div className='line'>\n          总PV: <span className='count'>{allPVCount}</span>\n        </div>\n        <div className='line'>\n          总评论数: <span className='count'>{allCommentCount}</span>\n        </div>\n        <div className='line'>\n          当日实时PV: <span className='count'>{todayPVCount}</span>\n        </div>\n        <div className='line'>\n          当日实时评论数: <span className='count'>{todayCommentCount}</span>\n        </div>\n        <div className={classes.refreshBtn}>\n          <IconButton aria-label='delete' onClick={refresh}>\n            <RefreshIcon />\n          </IconButton>\n        </div>\n      </div>\n\n      <div className='block-item chart-block latest-7-days-pv'>\n        <h3>最近7天PV数据</h3>\n        <div className='desc'>\n          <p>PV: Page View。即页面浏览量或点击量。</p>\n        </div>\n        <LineChart\n          data={{ source: pvsCounts }}\n          source={pvsCounts}\n          position='date*pv'\n          width='100%'\n          height='300px'\n          alias={{\n            y: '日PV',\n          }}\n        />\n      </div>\n\n      <div className='block-item chart-block latest-7-days-pv'>\n        <h3>最近7天评论数据</h3>\n        <LineChart\n          data={{ source: commentsCount }}\n          source={commentsCount}\n          position='date*count'\n          width='100%'\n          height='300px'\n          alias={{\n            y: '日评论',\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport Login from './components/Login';\nimport Dashboard from './components/Dashboard';\n\nimport './App.css';\n\nfunction App() {\n  const [isLogin, setIsLogin] = useState(false);\n\n  const handleLogin = () => {\n    setIsLogin(true);\n  };\n\n  return (\n    <div className='App'>\n      <div className=\"container\">\n        {!isLogin && <Login onLogin={handleLogin} />}\n        {isLogin && <Dashboard />}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}